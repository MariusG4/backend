// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String    @id @default(uuid())
  name         String    @default("")
  nameLast     String    @default("")
  email        String    @unique @default("")
  password     String
  isAdmin      Boolean   @default(false)
  isActive     Boolean   @default(true)
  blog         Blog[]    @relation("Blog_author")
  createdAt    DateTime? @default(now())
  dateModified DateTime? @default(now())
}

model Blog {
  id             String       @id @default(uuid())
  title          String       @default("")
  slug           String       @unique @default("")
  dateCreated    DateTime?    @default(now())
  dateModified   DateTime?    @default(now())
  status         String?      @default("DRAFT")
  featured_image String       @default("")
  content        Json         @default("[{\"type\":\"paragraph\",\"children\":[{\"text\":\"\"}]}]")
  author         User?        @relation("Blog_author", fields: [authorId], references: [id])
  authorId       String?      @map("author")
  categories     Category[]   @relation("Blog_categories")
  tags           Tag[]        @relation("Blog_tags")
  photo          MediaGalery? @relation("Blog_photo", fields: [photoId], references: [id])
  photoId        String?      @unique @map("photo")
  language       Language?    @relation("Blog_language", fields: [languageId], references: [id])
  languageId     String?      @map("language")

  @@index([authorId])
  @@index([languageId])
}

model Tag {
  id   String @id @default(uuid())
  name String @unique @default("")
  blog Blog[] @relation("Blog_tags")
}

model Category {
  id      String @id @default(uuid())
  name    String @unique @default("")
  excerpt String @default("")
  blog    Blog[] @relation("Blog_categories")
  job     Job[]  @relation("Job_category")
}

model MediaGalery {
  id              String  @id @default(uuid())
  image_filesize  Int?
  image_extension String?
  image_width     Int?
  image_height    Int?
  image_id        String?
  altText         String  @default("")
  filename        String  @unique @default("")
  blog            Blog?   @relation("Blog_photo")
}

model Language {
  id        String @id @default(uuid())
  languages String @default("RO")
  blog      Blog[] @relation("Blog_language")
}

model Job {
  id           String           @id @default(uuid())
  title        String           @default("")
  company      String           @default("")
  date         DateTime?        @mysql.Date
  category     Category?        @relation("Job_category", fields: [categoryId], references: [id])
  categoryId   String?          @map("category")
  description  String           @default("")
  requierments String           @default("")
  whyWork      String           @default("")
  applyForm    JobApplication[] @relation("JobApplication_job")

  @@index([categoryId])
}

model JobApplication {
  id        String    @id @default(uuid())
  name      String    @default("")
  email     String    @default("")
  message   String    @default("")
  createdAt DateTime? @default(now())
  job       Job?      @relation("JobApplication_job", fields: [jobId], references: [id])
  jobId     String?   @map("job")

  @@index([jobId])
}
